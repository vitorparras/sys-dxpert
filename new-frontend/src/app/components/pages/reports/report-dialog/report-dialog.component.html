<div class="report-dialog">
  <div class="dialog-content">
    <div class="dialog-header">
      <h2>{{ isEditMode ? 'Editar Relatório' : 'Adicionar Novo Relatório' }}</h2>
      <button mat-icon-button (click)="onCancel()" class="close-button">
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <form [formGroup]="reportForm" (ngSubmit)="onSubmit()">
      <div class="form-fields">
        <mat-form-field appearance="outline">
          <mat-label>Nome do Cliente</mat-label>
          <input matInput formControlName="nomeCliente" placeholder="Digite o nome do cliente">
          <mat-error *ngIf="reportForm.get('nomeCliente')?.invalid">{{ getErrorMessage('nomeCliente') }}</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Email do Cliente</mat-label>
          <input matInput formControlName="emailCliente" placeholder="Digite o email do cliente">
          <mat-error *ngIf="reportForm.get('emailCliente')?.invalid">{{ getErrorMessage('emailCliente') }}</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Telefone do Cliente</mat-label>
          <input matInput formControlName="telefoneCliente" placeholder="(XX) XXXXX-XXXX">
          <mat-error *ngIf="reportForm.get('telefoneCliente')?.invalid">{{ getErrorMessage('telefoneCliente') }}</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Nome do Responsável</mat-label>
          <input matInput formControlName="nomeResponsavel" placeholder="Digite o nome do responsável">
          <mat-error *ngIf="reportForm.get('nomeResponsavel')?.invalid">{{ getErrorMessage('nomeResponsavel') }}</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Etapa</mat-label>
          <mat-select formControlName="etapa">
            <mat-option value="Análise">Análise</mat-option>
            <mat-option value="Proposta">Proposta</mat-option>
            <mat-option value="Contrato">Contrato</mat-option>
            <mat-option value="Finalizado">Finalizado</mat-option>
          </mat-select>
          <mat-error *ngIf="reportForm.get('etapa')?.invalid">{{ getErrorMessage('etapa') }}</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Status</mat-label>
          <mat-select formControlName="status">
            <mat-option value="ativo">Ativo</mat-option>
            <mat-option value="arquivado">Arquivado</mat-option>
          </mat-select>
          <mat-error *ngIf="reportForm.get('status')?.invalid">{{ getErrorMessage('status') }}</mat-error>
        </mat-form-field>
      </div>

      <div class="form-actions">
        <button mat-button type="button" (click)="onCancel()">Cancelar</button>
        <button mat-flat-button color="primary" type="submit" [disabled]="reportForm.invalid">
          {{ isEditMode ? 'Atualizar' : 'Adicionar' }} Relatório
        </button>
      </div>
    </form>
  </div>
</div>

